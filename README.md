# Coupon Issue Service
- Kotlin과 헥사고날 아키텍처에 대한 이해도를 높이기 위한 TDD 기반 애플리케이션
- 쿠폰 생성과 발행, 선착순 이벤트 등 쿠폰 도메인 중심으로 동시성 제어와 도메인 주도 설계를 연습
# 패키지 구조 설명
- adapter: 외부와의 통신을 위한 패키지
  - web(인커밍 어댑터): 외부로부터 요청이 들어옴 Ex) API 요청
  - persistence(아웃고잉 어댑터): 외부로 요청을 보냄 Ex) DB 저장
- application: 도메인 객체들의 협력을 위한 서비스 계층
  - port
    - in(인커밍 포트): 인터페이스로써 요청의 입력에 대한 명세를 담당
    - out(아웃고잉 포트): 인터페이스로써 요청의 출력에 대한 명세를 담당
  - service: 인커밍 포트 인터페이스를 구현한 서비스
- domain: 도메인 객체가 존재하는 계층

# 기능 목록
## 요구사항
- 쿠폰 생성 `POST /api/v1/coupons`
  - [x] 쿠폰을 생성할 수 있다.
  - [x] 중복된 쿠폰 이름으로 생성하면 에러를 반환한다.
- 쿠폰 발행 `POST /api/v1/coupons/{couponId}/issue`
  - [x] 쿠폰을 발행할 수 있다.
  - [x] 쿠폰이 존재하지 않으면 에러를 반환한다.
  - [x] 남은 수량이 없을 경우 에러를 반환한다.
  - [x] 만료된 쿠폰이면 에러를 반환한다.
  - [x] 이미 발급된 쿠폰이면 에러를 반환한다.
- 선착순 쿠폰 발행 `POST /api/v1/coupons/event/issue`
  - [x] 다수의 사용자가 동시에 요청해도 중복/초과 발행되지 않아야 한다.
  - [x] `ReentrantLock` 또는 `Redis Lock`을 통해 동시성을 제어한다.

